<template>
  <span>
    <tippy
      ref="language"
      tabindex="-1"
      trigger="click"
      theme="popover"
      arrow
      :animate-fill="false"
    >
      <template #trigger>
        <SmartItem
          v-tippy="{ theme: 'tooltip' }"
          :title="$t('choose_language')"
          :label="`${
            $i18n.locales.find(({ code }) => code == $i18n.locale).country
            | formatCountry
          } ${$i18n.locales.find(({ code }) => code == $i18n.locale).name}`"
        />
      </template>
      <SmartItem
        v-for="locale in $i18n.locales.filter(
          ({ code }) => code !== $i18n.locale
        )"
        :key="locale.code"
        :to="switchLocalePath(locale.code).toString()"
        :label="`${locale.country | formatCountry} ${locale.name}`"
      />
    </tippy>
  </span>
</template>
